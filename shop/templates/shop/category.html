{% extends "base.html" %}
{% load static %}
{% load humanize %}


{% block metadescription %}
	{% if category %}
		{{ category.description|truncatewords:155 }}
	{% else %}
		Welcome to Ultimate Cards, the E-Commerce store for Ultimate Cards.
	{% endif %}
{% endblock %}

{% block title %}
	{% if category %}
		{{ category.name }} - Ultimate Cards
	{% else %}
		See our Collection - Ultimate Cards
	{% endif %}
{% endblock %}

{% block content %}
	<!--Breadcrumb navigation-->
	{% if category %}
		<div class="row my_row_class">
			<div class="mx-auto">
				<p style="font-size: 20px"> <a style="font-size: 20px;" href="{% url 'shop:allProdCat' %}">Our <span style="color:rgb(255, 115, 0);">{{category.name}}</span> Collection</a></p> 
			</div>
		</div>
	{% endif %}
	<div class="mx-auto">
	{% if category %}
	</div>
	<br>
	{% else %}
	<br>
	<div>
		<h1 class="text-center my_title" style="margin-bottom: 3%;">Our Product Collection</h1>
	</div>
	{% endif %}
	<div class="container">
		<div class="row mx-auto">
			{% for product in products.object_list %}
			{% if product.stock > 0 %}
				<div class="my_bottom_margin col-9 col-sm-12 col-md-4 col-md-12 col-lg-4"> <!-- using custom class and bootstrap grid classes to change div and making category page more interactive -->
					<div class="card text-center" style="min-width: 18rem; background-color: rgb(247, 247, 247);"> <!-- using bootstrap card classes to put all the products in cards -->
						<a href="{{ product.get_url }}"> <img class="card-img-top my_image" src="{{product.image.url}}" alt="{{product.name}}" > </a> <!-- So that when we click on any product image in a specific category we can go to the products details --> <!-- in img tag the classes are used to store images inside the cards -->
						<div class="card-body">
							<h4>{{ product.name }}</h4>
							<p>${{product.price|intcomma }} </p>
						</div>
					</div>
				</div>
				{% endif %}
			{% endfor %}
			
		</div>
		<div class="mx-auto">
			{% if products.paginator.num_pages > 1 %} <!-- if more than one page required only then will pagination div will show -->
				<hr>
				<div class="text-center">
					{% for pg in products.paginator.page_range %}
						<a href="?page={{pg}}" class="btn btn-light btn-sm {% if products.number == pg %}active{% endif %}"> {{pg}} </a>
					{% endfor %}
				</div>
			{% endif %}
			
		</div>
		<br>	
	</div>
{% endblock %}